- https://en.wikipedia.org/wiki/JTAG
  - Join Task/Test Action Group
  - 1990 (Intel 80486)
  - Implemented on ICs
  - a way to interface and diagnosticate production issues
  - not fast (boundary scans are bitshifted by design)
  - boundary scans
    - around a chip
    - can be extended to many other components/ics through its bitshifting nature
    - can be skipped through physical jumpers
  - NEEDS A BSDL TO READ
    - Boundary Scan Description Language
    - describes what each pin does, description ID of each chip
  - Goals
    - Controlability: set 0 and 1 internal memory
    - Observability: read internal memory registers
  - Can
    - boundary scan (aka testing pin connectivity)
    - rw EEPROM (aka program)
    - break into boot cycle
      - in-circuit debugging (aka control)
    - daisy chain multiple ics
  - https://en.wikipedia.org/wiki/Boundary_scan_description_language

* registers

- identification: chip id
- instruction
- boundary scan

* pins
|------+----+-----------------------+----------------------|
| TCK  | -> | Test Clock            |                      |
| TDO  | <- | Test Data Out         | high impedance input |
| TDI  | -> | Test Data In          | pullup               |
| TMS  | -> | Test Mode Select      | pullup               |
| TRST | -> | Test Reset (optional) | pullup/down          |
|------+----+-----------------------+----------------------|
- sometimes might have missing pull-up on TRST
- sometimes might have missing resistors
* pinouts

- sometimes determined by the SoC
- sometimes determined by the board manufacturer
- popular ones http://jtagtest.com/pinouts/

* tools

- UrJTAG https://urjtag.sourceforge.io/
- OpenOCD - Open On-Chip Debugger
  - https://openocd.org/
  - https://www.youtube.com/watch?v=_1u7IOnivnM
  - opencd opens a gdb server port
    #+begin_src sh
      $ opencd -f ft232h.cfg -f raspi.cfg
    #+end_src
  - use gdb-multiarch to connect to it
    #+begin_src sh
      $ gdb-multiarch  ./blink-led.elf
      gdb> set arch arm
      gdb> target extended-remote localhost:3333
      gdb> x10i 0xc0136dd4 # show 10 instructions on given memory
    #+end_src

* SWD

- https://en.wikipedia.org/wiki/JTAG#Similar_interface_standards
- ARM's JTAG implementation
- 2 pins: CLOCK, IO

* videos
- https://hackyourmom.com/en/osvita/english-chastyna-7-zlom-aparatnoyi-chastyny-systemy-uraznosti-portiv-uart-jtag-i-swd/
- 13 [[https://www.youtube.com/watch?v=I27NX8uTJNY][Hard disks: More than just block devices]]
  - article https://spritesmods.com/?art=hddhack&page=1
  - 20 article - https://habr.com/en/articles/532672/
    - different author
- 11 [[https://www.youtube.com/watch?v=k3ac5iBcfnQ][DEFCON 17: An Open JTAG Debugger]]
- 11 [[https://www.youtube.com/watch?v=TlWlLeC5BUs][EEVblog #499 - What is JTAG and Boundary Scan?]]
