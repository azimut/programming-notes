#+TITLE: gnuplot
#+DATE: <2024-12-27 vie>

|--------+-------------------------------------------------------|
| home   | http://gnuplot.info/                                  |
| faq    | http://gnuplot.info/faq/index.html                    |
| wiki   | https://en.wikipedia.org/wiki/Gnuplot                 |
| wiki   | https://en.wikibooks.org/wiki/Gnuplot                 |
| online | https://hostcat.fhsu.edu/cdclark/static/apps/gnuplot/ |
|--------+-------------------------------------------------------|

- 1986
- Thomas Williams, Colin Kelley, Russell Lang, Dave Kotz, John Campbell, Gershon Elber, Alexander Woo
- ~/.gnuplot, gnuplotrc (system-wide)
- .gp extension

* cli

#+begin_src
  gnuplot [x11 options] [options] [scriptfile ...]
#+end_src

|-----------+----+------------+---------------------------------|
|           | -e | CMDS       |                                 |
|           | -c | FILE [ARG] | runs script S with given args   |
| --persist | -p | -          | keep window after plotting ends |
| --slow    | -s | -          | wait for slow font init         |
| --default | -d | -          | do NOT read ~/.gnuplot          |
|-----------+----+------------+---------------------------------|

* language
#+begin_src sh
  #!/usr/bin/gnuplot -persist
#+end_src
** term
- xterm (xterm tektronix mode)
- dumb (aka ascii)
** commands
|-------+------------------------------------|
|   <r> |                                    |
| unset | OPTION                             |
|   set | OPTION [VALUE]                     |
|  with | (l)ines[*], dots[.], lines(points) |
|-------+------------------------------------|
** options (setteable)
#+CAPTION: S = a quoted string, N = a number
|--------------+-------------------+----------------------------------|
|     <c>      |        <c>        |                                  |
|              |     argument      | description                      |
|--------------+-------------------+----------------------------------|
|    border    |        [N]        | axis lines                       |
| [x¦y¦z]tics  | [nomirror¦rotate] | axis numbers                     |
| [x¦y¦z]label |         S         | axis label                       |
| [x¦y¦z]range |       [N:N]       | axis range                       |
|     grid     |         -         | axis grid                        |
|     key      |  [LR] [[no]box]   | the box with key labels          |
|--------------+-------------------+----------------------------------|
|   samples    |         N         | ????                             |
|    xdata     |       time        | tells x axis is a date/time      |
|   encoding   |       utf8        |                                  |
|   timefmt    |         S         | format of the INPUT date         |
|   datafile   |    separator S    | input separator (default: space) |
|--------------+-------------------+----------------------------------|
|    title     |         S         | the                              |
|    format    |     [x¦y] FMT     | tic format string                |
|   logscale   |     [x¦y] [N]     | with step N                      |
|  autoscale   |    [[x¦y]fix]     | prevents autoextend of scale     |
|    output    |         S         | saves into filepath at S         |
|    style     | fill transparent  |                                  |
|              |      solid F      |                                  |
|              |     noborder      |                                  |
|              |    data lines     |                                  |
|--------------+-------------------+----------------------------------|
|    pause     |         N         | seconds to pause                 |
|   +reread+   |         -         | REMOVED in 6.0 +reread input+    |
|--------------+-------------------+----------------------------------|
** plot
- plot
  - /dev/stdin
  - using N:N+1:N+n
  - smooth [bezier¦mcsplines]
- imagesc - matrix/heatmap - 2d contour
- splot - 3d surface
- hist
- scatter3 - 3d points
* snippets

- simple pipe
  #+begin_src sh
    $ gnuplot -p -e "plot '<cat'" < rawnumbers # opens qt window
    $ gnuplot -p -e "plot '-'"    < rawnumbers # opens qt window
    $ GNUTERM=dumb gnuplot -e "plot '-'"    < rawnumbers # ascii plot
  #+end_src

- stream - draw last 200 lines, ten times per second
  #+begin_src sh
   while (1) {
     plot "< tail -200 plot.dat" using 1:2 with lines
     pause 0.1
   }
  #+end_src

* examples

- https://github.com/TheFox/gnuplot-examples
- https://gnuplot.info/screenshots/index.html
- https://gnuplot.sourceforge.net/demo_5.4/

* tools

- wrapper: plot realtime and stored data from the cli https://github.com/dkogan/feedgnuplot
- config https://github.com/Gnuplotting/gnuplot-configs
- pallettes
  - https://github.com/Gnuplotting/gnuplot-palettes
  - https://github.com/aschn/gnuplot-colorbrewer

* gotchas

- poor compiler messages
- different compiler messages when reading a script or from *-e*
- no *%a* date format for input parsing
- to read from stdin "-" might not work in plot (?
  - use /dev/stdin
